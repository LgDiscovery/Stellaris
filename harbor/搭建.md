### 🚀 方案一：【最推荐】Harbor 离线完整安装步骤（页面下载 + 离线导入 + 离线部署，Ubuntu+containerd/K8s）

这是**全网最详细的 Harbor 离线部署实操步骤**，适配你的所有需求，**无任何坑点**，版本选择：`v2.8.3`（稳定版，生产首选）

#### ✅ 步骤 1：浏览器页面下载 Harbor 离线安装包（无命令行，纯页面下载，解决网络差）

**下载地址（官网，可直接浏览器打开，中文可访问）**：

[https://github.com/goharbor/harbor/releases/tag/v2.8.3](https://github.com/goharbor/harbor/releases/tag/v2.8.3)

在这个页面，找到 2 个文件，**用浏览器直接下载到本地电脑**（支持断点续传，网络差也能下）：

① `harbor-offline-installer-v2.8.3.tgz` → Harbor 离线安装主包（包含所有配置文件 + 离线安装脚本，约 60MB）；

② 这个离线包**已经内置了所有 Harbor 运行所需的镜像压缩包**，无需额外下载其他镜像，这是 Harbor 离线包的核心优势！

#### ✅ 步骤 2：把下载好的安装包传到 Ubuntu 服务器

用 SCP/Xshell/FinalShell 把 `harbor-offline-installer-v2.8.3.tgz` 传到服务器的 `/usr/local/` 目录下。

#### ✅ 步骤 3：解压离线安装包

bash

运行

```
cd /usr/local/
tar -zxvf harbor-offline-installer-v2.8.3.tgz
cd harbor
```

#### ✅ 步骤 4：修改 Harbor 配置文件（极简配置，生产够用）

bash

运行

```
# 复制配置模板
cp harbor.yml.tmpl harbor.yml

# 编辑配置文件
vim harbor.yml

# 只需要修改以下3个配置项，其他默认即可，不用动！
1. hostname: 192.168.1.100  # 改成你的服务器实际IP地址，不要用localhost
2. http: port: 80            # 端口用80，简单，无需配置HTTPS证书（内网够用）
3. harbor_admin_password: Harbor12345  # 管理员密码，可自定义，记住这个密码，登录用
```

> 注意：如果不需要 HTTPS，直接把配置文件里的 `https` 相关配置**全部注释掉**，避免报错。

#### ✅ 步骤 5：离线导入 Harbor 所有镜像（核心步骤，无网络，本地导入）

Harbor 的离线安装包中，已经内置了所有运行所需的镜像压缩包，执行脚本自动导入，无需手动操作：

bash

运行

```
# 加载所有离线镜像（自动导入到本地，无网络请求）
./prepare

# 验证镜像是否导入成功（能看到harbor开头的镜像列表即成功）
docker images | grep harbor
```

#### ✅ 步骤 6：离线安装 Harbor（一键安装，全程无网络）

bash

运行

```
# 执行离线安装脚本，一键部署
./install.sh

# 安装完成后，验证是否启动成功
docker-compose ps
```

#### ✅ 步骤 7：验证 Harbor 是否可用

1. 浏览器访问：`http://你的服务器IP` → 输入账号`admin`，密码`Harbor12345` → 成功登录 Harbor 的 Web 管理页面；
2. 在 Harbor 中创建项目、上传镜像，然后用 K8s (containerd) 拉取，完全正常！
